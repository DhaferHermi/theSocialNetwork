{% extends 'base.html.twig' %}

{% block title %}Hello PublicationController!{% endblock %}
{% block cssPublication %} {{ parent() }} {% endblock %}
{% block body %}
<style>
    .example-wrapper { margin: 1em auto; max-width: 800px; width: 95%; font: 18px/1.5 sans-serif; }
    .example-wrapper code { background: #F5F5F5; padding: 2px 6px; }
</style>

<div class="example-wrapper">


    <h1>{{ app.user.getUsername() }} </h1>


</div>

    <div class="container mt-4 mb-5">
        <div class="d-flex justify-content-center row">
            <div class="col-md-8">

                <div class="feed p-2">

                    {% for m in ListPublications %}
                        {% for friends in app.user.userA %}
                        {% if m.getUsrId().id == friends.userB.getId()  and friends.getStatus() =='friends'     %}
                    <div class="bg-white border mt-2" >
                        <div>
                            <div class="d-flex flex-row justify-content-between align-items-center p-2 border-bottom">
                                <div class="d-flex flex-row align-items-center feed-text px-2"><img class="rounded-circle" src="{{ asset('../../../../uploads/'~m.getUsrId().getPhotoUrl()) }}" width="45">
                                    <div class="d-flex flex-column flex-wrap ml-2"><span class="font-weight-bold">{{ m.getUsrId().getUsername() }}   </span><span class="text-black-50 time">{{ m.getDateCreation()|date('Y-m-d H:i:') }}</span></div>
                                </div>
                            </div>
                        </div>
                        <div class="p-2 px-3"><span>{{ m.publication }}.</span></div>
                        <div   class="feed-image p-2 px-2" ><img    style="height: 300px" class="img-fluid img-responsive" src="{{ asset('../../../../uploads/'~ m.getPhotoUrl() )}}" ></div>


                        {{ form_start(formCommentaire) }}
                        <div class="p-2 px-2">
                            <span>Commentaire</span>
                            <input type="text"  name="text"  class="col-md-12" >
                            <input type="hidden" value="{{ m.getId() }}" name="pub">
                            <button type="submit" class="btn btn-primary" style="margin-top: 15px ; margin-left: 500px;">
                                ajouterCommentaire
                            </button>
                        </div>
                        {{ form_end(formCommentaire) }}

                        <div class="p-2 px-2">
                            {% for c in m.Commentaires %}

                                {{ c.Text }}

                            {% endfor %}
                        </div>

                    </div>
                        {% endif %}
                    {% endfor %}
                        {% if m.getUsrId().id == app.user.getId()%}
                            <div class="bg-white border mt-2">
                                <div>
                                    <div class="d-flex flex-row justify-content-between align-items-center p-2 border-bottom">
                                        <div class="d-flex flex-row align-items-center feed-text px-2"><img class="rounded-circle" src="{{ asset('../../../../uploads/'~m.getUsrId().getPhotoUrl()) }}" width="45">
                                            <div class="d-flex flex-column flex-wrap ml-2"><span class="font-weight-bold">{{ m.getUsrId().getUsername() }}   </span><span class="text-black-50 time">{{ m.getDateCreation()|date('Y-m-d H:i:') }}</span></div>
                                        </div>

                                            <div class="feed-icon px-2"><a href="{{ path("PublicationDelete", {'id': m.id}) }}"><i class="fa fa-trash "style='color: red ; margin-right: 10px'  ></i></a> <a href="{{ path("PublicationUpdate", {'id': m.id}) }}"> <i class="fa fa-pencil" style='color: orange'></i></a></div>
                                    </div>
                                </div>
                                <div class="p-2 px-3"><span>{{ m.publication }}.</span></div>
                                <div class="feed-image p-2 px-2"><img    style="height: 300px"  class="img-fluid img-responsive" src="{{ asset('../../../../uploads/'~ m.getPhotoUrl() )}}"></div>
                                {{ form_start(formCommentaire) }}
                                <div class="p-2 px-2">
                                    <span>Commentaire</span>
                                    <input type="text"  name="text"  class="col-md-12" >
                                    <input type="hidden" value="{{ m.getId() }}" name="pub">
                                    <button type="submit" class="btn btn-primary" style="margin-top: 15px ; margin-left: 500px;">
                                        ajouterCommentaire
                                    </button>
                                </div>
                                <div class="p-2 px-2">
                                    {% for c in m.Commentaires %}

                                        {{ c.Text }}

                                    {% endfor %}
                                </div>
                                {{ form_end(formCommentaire) }}
                            </div>
                        {% endif %}
                    {% endfor %}
                </div>

            </div>

        </div>
    </div>



{% endblock %}
